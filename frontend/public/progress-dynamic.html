<!DOCTYPE html>
<html class="" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Projects in Progress - Problem Solver Foundation</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: {
          primary: "#117dd4",
          "background-light": "#f6f7f8",
          "background-dark": "#101a22",
        },
        
        borderRadius: {
          DEFAULT: "0.25rem",
          lg: "0.5rem",
          xl: "0.75rem",
          full: "9999px",
        },
      },
    },
  };
</script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">

<header class="sticky top-0 z-10 flex items-center justify-between whitespace-nowrap border-b border-border-light dark:border-border-dark bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm px-4 md:px-10 py-4">
<div class="flex items-center gap-3">
<div class="text-primary size-7">
<svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path clip-rule="evenodd" d="M12.0799 24L4 19.2479L9.95537 8.75216L18.04 13.4961L18.0446 4H29.9554L29.96 13.4961L38.0446 8.75216L44 19.2479L35.92 24L44 28.7521L38.0446 39.2479L29.96 34.5039L29.9554 44H18.0446L18.04 34.5039L9.95537 39.2479L4 28.7521L12.0799 24Z" fill="currentColor" fill-rule="evenodd"></path>
</svg>
</div>
<h2 class="text-lg font-bold">Problem Solver Foundation</h2>
</div>
<nav class="hidden md:flex items-center gap-6">
<a class="text-sm font-medium hover:text-primary transition-colors" href="index.html">Home</a>
<a class="text-sm font-medium hover:text-primary transition-colors" href="solutions-dynamic.html">Solutions</a>
<a class="text-sm font-medium hover:text-primary transition-colors" href="impact-dynamic.html">Impact</a>
<a class="text-sm font-medium hover:text-primary transition-colors" href="blog.html">Blog</a>
<a class="text-sm font-medium hover:text-primary transition-colors" href="about.html">About</a>
<a class="text-sm font-medium hover:text-primary transition-colors" href="contact.html">Contact</a>
</nav>
<div class="flex items-center gap-4">
<button onclick="location.href='join-options.html'" class="bg-primary text-white rounded-lg h-10 px-4 text-sm font-bold hover:bg-opacity-90 transition-all">
<span class="truncate">Join</span>
</button>
<button class="md:hidden p-2 rounded-lg hover:bg-primary/10">
<span class="material-symbols-outlined">menu</span>
</button>
</div>
</header>

<main class="container mx-auto px-4 py-8 sm:px-6 lg:px-8">
  <div class="mx-auto max-w-6xl">
    <!-- Cabe√ßalho -->
    <div class="mb-12 text-center">
      <h2 class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl">
        Projects in Progress
      </h2>
      <p class="mt-4 text-lg text-gray-600 dark:text-gray-400">
        Tracking the impact of our current initiatives.
      </p>
    </div>

    <!-- Container dos Projetos (Ser√° preenchido via JavaScript) -->
    <div id="projects-container" class="space-y-16">
      <!-- Os projetos ser√£o inseridos aqui dinamicamente -->
    </div>

    <!-- M√©tricas Gerais -->
    <div class="mt-20">
      <h3 class="mb-8 text-center text-3xl font-bold text-gray-900 dark:text-white">Key Metrics</h3>
      <div id="metrics-container" class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
        <!-- M√©tricas ser√£o calculadas dinamicamente -->
      </div>
    </div>
  </div>
</main>

<!-- Scripts -->
<script src="../assets/js/config.js"></script>
<script src="../assets/js/utils.js"></script>
<script src="../assets/js/projects.js"></script>

<script>
  // Quando a p√°gina carregar
  document.addEventListener('DOMContentLoaded', async () => {
    console.log('üöÄ Carregando projetos...');
    
    // Carregar projetos da categoria "progress"
    await ProjectsUI.loadProjectsByCategory('progress', 'projects-container');
    
    // Calcular e exibir m√©tricas
    await loadMetrics();
  });

  // Fun√ß√£o para carregar m√©tricas gerais
  async function loadMetrics() {
    try {
      const response = await ProjectsAPI.getAll();
      
      if (!response.success || !response.data) return;
      
      const projects = response.data;
      
      // Calcular m√©tricas
      const totalProjects = projects.length;
      const totalLivesImpacted = projects.reduce((sum, p) => {
        return sum + (p.metrics?.livesImpacted || 0);
      }, 0);
      const totalVolunteers = projects.reduce((sum, p) => {
        return sum + (p.metrics?.volunteersInvolved || 0);
      }, 0);
      
      // Exibir m√©tricas
      const metricsContainer = document.getElementById('metrics-container');
      metricsContainer.innerHTML = `
        <div class="rounded-lg border border-gray-200 bg-white p-6 text-center shadow-sm dark:border-gray-800 dark:bg-gray-900/20">
          <p class="text-base font-medium text-gray-600 dark:text-gray-400">Total Projects</p>
          <p class="mt-2 text-4xl font-bold text-primary">${totalProjects}</p>
        </div>
        <div class="rounded-lg border border-gray-200 bg-white p-6 text-center shadow-sm dark:border-gray-800 dark:bg-gray-900/20">
          <p class="text-base font-medium text-gray-600 dark:text-gray-400">Lives Impacted</p>
          <p class="mt-2 text-4xl font-bold text-primary">${Utils.formatNumber(totalLivesImpacted)}+</p>
        </div>
        <div class="rounded-lg border border-gray-200 bg-white p-6 text-center shadow-sm dark:border-gray-800 dark:bg-gray-900/20">
          <p class="text-base font-medium text-gray-600 dark:text-gray-400">Volunteers</p>
          <p class="mt-2 text-4xl font-bold text-primary">${Utils.formatNumber(totalVolunteers)}+</p>
        </div>
      `;
      
    } catch (error) {
      console.error('Erro ao carregar m√©tricas:', error);
    }
  }
</script>

</body>
</html>